{
  "version": 3,
  "sources": ["../../src/index.ts", "../../src/errors/missing-route.error.ts", "../../src/route-entry.ts"],
  "sourcesContent": ["export * from './route-entry';\n", "export class MissingRouteError extends Error {\n  name = 'MissingRouteError';\n}\n", "import { MissingRouteError } from './errors/missing-route.error';\n\ntype RouteParamValue = string | number;\n\n// Combines 2 string literals delimited by a forward slash: users/:userId\n// while maintaining the literal types.  This allows us to create strictly\n// types strings which work with the Route Class\ntype MergedRoutes<\n  ParentPath extends string,\n  ChildPath\n> = ChildPath extends string ? `${ParentPath}/${ChildPath}` : never;\n\ntype PathParams<T extends string> =\n  T extends `${string}:${infer Param}/${infer Rest}`\n    ? { [K in Param | keyof PathParams<Rest>]: RouteParamValue }\n    : T extends `${string}:${infer Param}`\n      ? { [K in Param]: RouteParamValue }\n      : undefined;\n\ntype URLInputs = {\n  query?: Record<string, RouteParamValue>;\n  hash?: string;\n};\n\nexport class Route<T extends string> {\n  private readonly _path: T;\n  private readonly _relativePath: string;\n\n  constructor(path: T, relativePath?: string) {\n    // Both the `path` and `relativePath` getters add\n    // their own leading slash.  So we do not need one\n    // in the setup\n    if (path.startsWith('/')) {\n      console.warn(\n        `[HATEOS-ROUTES] Leading slash is handled by the class and not required, may result in unusual paths [${path}]`\n      );\n    }\n\n    this._path = path;\n    this._relativePath = relativePath ?? path;\n  }\n\n  get path(): string {\n    return `/${this._relativePath}`;\n  }\n\n  get fullPath(): string {\n    return `/${this._path}`;\n  }\n\n  nest<NestedPath extends string>(path: NestedPath) {\n    // Throw an error if the path string is empty\n    this.pathPresentCheck(path);\n\n    const combinedPath = `${this._path}/${path}` as MergedRoutes<T, NestedPath>;\n\n    return new Route(combinedPath, path);\n  }\n\n  url<Params extends PathParams<T> = PathParams<T>>(\n    params?: keyof Params extends never ? undefined : Params,\n    options?: URLInputs\n  ): string {\n    let output = `/${this._path}` as string;\n\n    if (params) {\n      for (const key of Object.keys(params ?? {})) {\n        const value = params[key];\n        output = output.replace(`:${key}`, value);\n      }\n    }\n\n    if (options?.query) {\n      const query = new URLSearchParams();\n      for (const qItem in options.query) {\n        query.append(qItem, options.query[qItem].toString());\n      }\n\n      output += encodeURI(`?${query.toString()}`);\n    }\n\n    if (options?.hash) {\n      output += encodeURI(`#${options.hash}`);\n    }\n\n    return output;\n  }\n\n  private pathPresentCheck(path: string) {\n    if (path.length === 0) {\n      throw new MissingRouteError('A route path must be provided');\n    }\n  }\n}\n\n// Note: Location Anatomy: https://developer.mozilla.org/en-US/docs/Web/API/Location\n//\n// https://example.org:8080/foo/bar?q=baz#bang\n// ^1      ^2              ^3      ^4    ^5\n//\n// 1: Protocol\n// 2: Host (hostname + port)\n// 3: Pathname\n// 4: Search\n// 5: Hash\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAO,IAAM,oBAAN,cAAgC,MAAM;AAAA,EAAtC;AAAA;AACL,gCAAO;AAAA;AACT;;;ACsBO,IAAM,QAAN,MAAM,OAAwB;AAAA,EAInC,YAAY,MAAS,cAAuB;AAH5C,wBAAiB;AACjB,wBAAiB;AAMf,QAAI,KAAK,WAAW,GAAG,GAAG;AACxB,cAAQ;AAAA,QACN,wGAAwG,IAAI;AAAA,MAC9G;AAAA,IACF;AAEA,SAAK,QAAQ;AACb,SAAK,gBAAgB,sCAAgB;AAAA,EACvC;AAAA,EAEA,IAAI,OAAe;AACjB,WAAO,IAAI,KAAK,aAAa;AAAA,EAC/B;AAAA,EAEA,IAAI,WAAmB;AACrB,WAAO,IAAI,KAAK,KAAK;AAAA,EACvB;AAAA,EAEA,KAAgC,MAAkB;AAEhD,SAAK,iBAAiB,IAAI;AAE1B,UAAM,eAAe,GAAG,KAAK,KAAK,IAAI,IAAI;AAE1C,WAAO,IAAI,OAAM,cAAc,IAAI;AAAA,EACrC;AAAA,EAEA,IACE,QACA,SACQ;AACR,QAAI,SAAS,IAAI,KAAK,KAAK;AAE3B,QAAI,QAAQ;AACV,iBAAW,OAAO,OAAO,KAAK,0BAAU,CAAC,CAAC,GAAG;AAC3C,cAAM,QAAQ,OAAO,GAAG;AACxB,iBAAS,OAAO,QAAQ,IAAI,GAAG,IAAI,KAAK;AAAA,MAC1C;AAAA,IACF;AAEA,QAAI,mCAAS,OAAO;AAClB,YAAM,QAAQ,IAAI,gBAAgB;AAClC,iBAAW,SAAS,QAAQ,OAAO;AACjC,cAAM,OAAO,OAAO,QAAQ,MAAM,KAAK,EAAE,SAAS,CAAC;AAAA,MACrD;AAEA,gBAAU,UAAU,IAAI,MAAM,SAAS,CAAC,EAAE;AAAA,IAC5C;AAEA,QAAI,mCAAS,MAAM;AACjB,gBAAU,UAAU,IAAI,QAAQ,IAAI,EAAE;AAAA,IACxC;AAEA,WAAO;AAAA,EACT;AAAA,EAEQ,iBAAiB,MAAc;AACrC,QAAI,KAAK,WAAW,GAAG;AACrB,YAAM,IAAI,kBAAkB,+BAA+B;AAAA,IAC7D;AAAA,EACF;AACF;",
  "names": []
}
